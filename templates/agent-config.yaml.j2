server:
  http_listen_port: 12345

integrations:
  node_exporter:
    enabled: true
  prometheus_remote_write:
    - url: "{{ grf_api_metrics_url }}"
      basic_auth:
        username: "{{ grf_api_prometheus_user }}"
        password: "{{ grf_api_key }}"
logs:
  configs:
  - clients:
    - basic_auth:
        password: "{{ grf_api_key }}"
        username: "{{ grf_api_loki_user }}"
      url: "{{ grf_logs_api_url }}"
    name: integrations
    positions:
      filename: /tmp/positions.yaml
    target_config:
      sync_period: 10s

metrics:
  configs:
  - name: integrations
    remote_write:
      - url: "{{ grf_api_metrics_url }}"
        basic_auth:
          username: "{{ grf_api_prometheus_user }}"
          password: "{{ grf_api_key }}"
  - name: OpenWRT
    scrape_configs:
      - job_name: OpenWRT
        static_configs:
          - targets: ['172.16.250.1:9100']
    remote_write:
      - url: "{{ grf_api_metrics_url }}"
        basic_auth:
          username: "{{ grf_api_prometheus_user }}"
          password: "{{ grf_api_key }}"
  global:
    scrape_interval: 60s
  wal_directory: /tmp/grafana-agent-wal